#!/bin/bash

# üîÑ –ñ–¥—ë–º, –ø–æ–∫–∞ Kafka —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π
# cub ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –æ—Ç Confluent, –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –æ–±—Ä–∞–∑
# –í–∞–∂–Ω–æ! –£–∫–∞–∑—ã–≤–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç: kafka:29092
cub kafka-ready -b kafka:29092 1 20

# üß± –°–æ–∑–¥–∞—ë–º —Ç–æ–ø–∏–∫ 'orders'
kafka-topics \
  --bootstrap-server kafka:29092 \
  --create \
  --if-not-exists \
  --topic orders \
  --partitions 3 \
  --replication-factor 1 || echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫, –≤–æ–∑–º–æ–∂–Ω–æ –æ–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞."

# ‚úÖ –ì–æ—Ç–æ–≤–æ!
echo "–¢–æ–ø–∏–∫ 'orders' —Å–æ–∑–¥–∞–Ω –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç."

# üì§ –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–∫—Ä–∏–ø—Ç, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
exit 0
